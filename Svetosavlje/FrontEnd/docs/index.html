<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>Snapshots (Angular)</title>

<xmp theme="united" style="display:none;">
# Developer Documentation
###Overview
Snapshots allows a user to select a county within US coastal range and see economic data about that county through tree "snapshots":
+	Flood Exposure snapshot - shows flood related information
+	Ocean Jobs snapshot - shows information about ocean jobs (tourism, marine construction etc)
+	Wetland Benefits snapshots -  benefits wetland provide to a county (less flooding, better fishing etc)

###Features

+	Select a county through interactive map
+	Select a county through state/county combo boxes
+	Display Flood Exposure snapshot
+	Display Ocean Jobs snapshot
+	Display Wetland Benefits snapshots
+	Formated printing of snapshots as polished reports

## Hosting

+ **Production**
	- [http://www.coast.noaa.gov/snapshots/](coast.noaa.gov/snapshots)
+ **QA**
	- [http://webqa.coast.noaa.gov/snapshotsangular/](webqa.coast.noaa.gov/snapshotsangular)
+ **Development**
	- [http://webdev.coast.noaa.gov/snapshotsangular/](webdev.coast.noaa.gov/snapshotsangular)

## Version Control
+ **SVN Url**
	- [https://csc-s-internals.nos.noaa/svn/SnapshotsAngular/trunk](https://csc-s-internals.nos.noaa/svn/SnapshotsAngular/trunk)
+ **Branches**
	- Currently there are no branches
+ **Tags**
	- 2014-08-12 Production Release ([https://csc-s-internals.nos.noaa/svn/SnapshotsAngular/tags/2014-08-12 Production Release](https://csc-s-internals.nos.noaa/svn/SnapshotsAngular/tags/2014-08-12 Production Release)) - this is new snapshot redone in angular


## Issue Tracking
 This project uses JIRA for issue tracking. [Here](http://feedback.coast.noaa.gov/browse/SNAPSHOT) is The JIRA page for this project

## Javascript Libraries
All JavaScript libraries used in the project can be seen in ```index.html``` file.

Third party libraries point to their Internet distribution links, so they don't have to be downloaded again (it's very likely that a user has those libraries downloaded from before)

+	angular
+	angular routing
+	leaflet
+	jquery
+	angulartics (we do have center copy of this one)
+	angulartics-google-analytics (we do have center copy of this one)

## Webservices
The project is using following database services:

+	GeographyLookUp (provides list of all the counties and available snapshots for them - this service is used to fill State and County combo boxes, and to enable or disable snapshot buttons when a county is selected)
+	FloodData (provides information for Flood Snapshot)
+	OceanJob (provides information for Ocean Jobs Snapshots)
+	WetlandsBenefits (provides information for Wetland benefits snaphost)

Following are web addresses for the above services in Dev, QA and Prod:

+	Dev: http://webdev/dataservices/Snapshot/v2/FloodData (or OceanJob or WetlandsBenefits) - sample call: http://webdev/dataservices/Snapshot/v2/FloodData?GeoId=48321&f=jsonp&callback=JSON_CALLBACK
+	QA: http://webqa.coast.noaa.gov/dataservices/Snapshot/v2/FloodData (or OceanJob or WetlandsBenefits)
+	Prod: http://coast.noaa.gov/dataservices/Snapshot/v2/FloodData (or OceanJob or WetlandsBenefits)

## GIS Services

We use 2 GIS services for map layers:

+	Map layer provides map background. It shows either states or counties, depending on the zoom level. http://maps.coast.noaa.gov/arcgis/rest/services/Snapshot/Snapshot_Base/MapServer/tile/{z}/{y}/{x}
+	Cities layer provides cities names. This layer is on top of the map layer and shows major cities, so it's easier for users to figure out where they are. http://maps.coast.noaa.gov/arcgis/rest/services/Snapshot/Snapshot_Cities/MapServer/tile/{z}/{y}/{x}

We use 2 GIS services for shapes:

+	State shapes provides polygons (shapes) for states. If Map layer (above) is zoomed out to show states, then we create geoJson state shapes that are click-able, and change color depending if they're selected or hovered over. http://maps.coast.noaa.gov/arcgis/rest/services/Snapshot/Snapshot_Query/MapServer/2/query?f=json&spatialRel=esriSpatialRelIntersects&where=1=1&time=&outSR=4326&returnGeometry=true&callback=JSON_CALLBACK
+	County shapes provides polygons (shpaes) for counties. Same functionality like State shapes, these shapes are added to the map with zoom level is zoomed to county level. http://maps.coast.noaa.gov/arcgis/rest/services/Snapshot/Snapshot_Query/MapServer/1/query?f=json&spatialRel=esriSpatialRelIntersects&outFields=STATE_FIPS,CNTY_FIPS,FLOOD,OCEAN_JOBS,WETLAND,STATE_NAME,NAME&returnGeometry=true&where=1=1&outSR=4326&callback=JSON_CALLBACK

## Configuration Files

We use config part of SharedService to set path for web and GIS services (SharedService.config)

	snapshots
	├── Services
	│   ├── SharedService.js (web and GIS service path, depending if Dev, QA or Production)




## File structure
	snapshots
	├── controllers (all angular controllers are here)
	├── css
	├── docs ( <----- You are here!)
	├── faq (pdf files for the 3 snapshots)
	├── img (images used)
	├── js (folder for javascipts)
	│   ├── center-angularitics.js (this file should be put on center s web site to be shared with all projects. It changes application ID for google analytics based on environment -dev, qa or prod)
	│   ├── highcharts.min.js (script for rendering charts that are used in snapshot pages)
	│   ├── jsonConverter.js (script that converts json to geoJson that is used with leaflet)
	│   ├── main.js (script where angular application is set-up)
	│   ├── slr.ui.js
	├── node_modules
	├── partials (stores all html partials which are lazy loaded with AJAX when needed)
	├── app.html (Main html file, where we make changes)
	├── index.html (Auto-generated, when project is built)

## Build & Deploy

+	**Build	**

		Project does not use the super awesome library called [Easypack](http://shaunakv1.github.io/easypack/) (which needs [node.js](nodejs.org) installed to build).
		It should be noted that project can still be deployed without building and that's what we're doing right now, but we are  missing out on all the awesome JavaScript and css compression and caching features :)
+ 	**Deploy**

		A tag should be created in SVN for deployment, and then simple SVN checkout to production folder will deploy the application. Latest production tag is: [2014-08-12 Production Release](https://csc-s-internals.nos.noaa/svn/SnapshotsAngular/tags/2014-08-12%20Production%20Release)

## Documents and Artifacts

## Team and Contact Information
+ Federal Project Lead - Jeffery Adkins
+ Project Coordinator  - Bill Stevenson 
+ Data Steward         - Gabe Sataloff
+ SQL Server admin	   - Jason Marshall
+ Developer            - Dejan Bujak

</xmp>

<script src="http://strapdownjs.com/v/0.2/strapdown.js"></script>
</html>